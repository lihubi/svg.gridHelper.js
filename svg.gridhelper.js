(function(n,r){typeof exports=="object"&&typeof module<"u"?r(require("@svgdotjs/svg.js")):typeof define=="function"&&define.amd?define(["@svgdotjs/svg.js"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.SVG))})(this,function(n){"use strict";var T=Object.defineProperty;var k=(n,r,b)=>r in n?T(n,r,{enumerable:!0,configurable:!0,writable:!0,value:b}):n[r]=b;var g=(n,r,b)=>(k(n,typeof r!="symbol"?r+"":r,b),b);/*!
* svg-gridhelper - An extension for svg.js which adds a grid helper to the svg
* @version 0.0.6
* https://github.com/svgdotjs/svg.gridhelper.js
*
* @copyright Li Kang
* @license MIT
*
* BUILT: Fri Jun 27 2025 07:37:43 GMT+0000 (Coordinated Universal Time)
*/class r{constructor(t,i){g(this,"draw");g(this,"options");g(this,"gridGroup");g(this,"labelGroup");g(this,"visible");g(this,"labelTemplate");g(this,"parentDraw");this.parentDraw=t;const o=t.node.parentNode,s=t.width(),l=t.height();o.style.position="relative",this.draw=n.SVG().addTo(o).size(s,l).css({position:"absolute",top:"0",left:"0","z-index":"1","pointer-events":"none"}),this.options=Object.assign({gridSize:100,minPixels:100,gridColor:"gray",labelColor:"#666",gridStrokeWidth:1,labelFontSize:12},i),this.labelTemplate=this.draw.text("").hide(),this.gridGroup=this.draw.group(),this.labelGroup=this.draw.group(),this.visible=!0,this.update()}calculateGridSize(){const t=this.draw.zoom(),i=this.options.minPixels;let s=this.options.gridSize;for(;s*t<i;)s*=2;for(;s*t>i*2;)s/=2;return Math.max(s,5)}update(){if(this.gridGroup.clear(),!this.visible)return;const t=this.parentDraw.zoom(),i=this.parentDraw.viewbox();this.draw.viewbox(i.x,i.y,i.width,i.height),this.draw.zoom(t);const o=this.calculateGridSize(),s=i.x,l=i.y,u=i.width,d=i.height,c=(Math.floor(s/o)-5)*o,f=(Math.ceil((s+u)/o)+5)*o,w=(Math.floor(l/o)-5)*o,x=(Math.ceil((l+d)/o)+5)*o;for(let h=c;h<=f;h+=o)this.gridGroup.line(h,w,h,x).stroke({width:this.options.gridStrokeWidth/t,color:this.options.gridColor,opacity:.7});for(let h=w;h<=x;h+=o)this.gridGroup.line(c,h,f,h).stroke({width:this.options.gridStrokeWidth/t,color:this.options.gridColor,opacity:.7});this.drawLabels(o,s,l,u,d)}drawLabels(t,i,o,s,l){const u=this.options.labelFontSize,d=new Map;this.labelGroup.children().forEach(e=>{const p=`${e.attr("position")}-${e.text()}`;d.set(p,e)});const c=(e,a,p,M,W,v,S)=>{const z=`${S}-${e}`;d.has(z)?(d.get(z).font("size",v).move(a,p),d.delete(z)):this.createLabel(e,a,p,M,W,v,S)},f=(Math.floor(i/t)-5)*t,w=(Math.ceil((i+s)/t)+5)*t,x=(Math.floor(o/t)-5)*t,h=(Math.ceil((o+l)/t)+5)*t,y=1/this.draw.zoom(),m=u*y,G=this.getNumberWidth();for(let e=f;e<=w;e+=t){const a=e,p=e.toString().length*G;c(e.toString(),a-p/2,o,"middle","auto",m,"top")}for(let e=f;e<=w;e+=t){const a=e,p=e.toString().length*G;c(e.toString(),a-p/2,l-m+o,"middle","auto",m,"bottom")}for(let e=x;e<=h;e+=t){const a=e;c(e.toString(),i,a-m/2,"start","middle",m,"left")}for(let e=x;e<=h;e+=t){const a=e,p=e.toString().length*G;c(e.toString(),s+i-p,a-m/2,"end","middle",m,"right")}d.forEach(e=>e.remove())}createLabel(t,i,o,s,l,u,d){const c=this.labelTemplate.clone().text(t).font({size:u,family:"Arial, sans-serif"}).fill(this.options.labelColor).attr({"text-anchor":s,"dominant-baseline":l,"pointer-events":"none",style:"user-select: none;",position:d}).move(i,o).show();this.labelGroup.add(c),c.front()}toggle(t){t!==void 0?this.visible=t:this.visible=!this.visible,this.visible?(this.gridGroup.show(),this.labelGroup.show(),this.update()):(this.gridGroup.hide(),this.labelGroup.hide())}updateOptions(t){Object.assign(this.options,t),this.update()}getNumberWidth(){const i=1/this.draw.zoom(),s=this.options.labelFontSize*i,l=this.labelTemplate.clone().text("0").font("size",s),u=l.bbox();return l.remove(),u.width}resize(){}destroy(){this.gridGroup.remove(),this.labelGroup.remove()}}n.extend(n.Svg,{gridHelper(b){const t=new r(this,b);return this.gridHelper=t,this}})});
//# sourceMappingURL=svg.gridhelper.js.map
